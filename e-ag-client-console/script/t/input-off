#!/bin/bash
# input-off.sh â€” GerÃ§ek klavye ve fareleri devre dÄ±ÅŸÄ± bÄ±rakÄ±r (X11 iÃ§in)

# Fiziksel X oturumunu bul
USER=$(who | grep "(:0" | awk '{print $1}' | head -n 1)
DISPLAY=":0"
XAUTHORITY="/home/$USER/.Xauthority"

if [ -z "$USER" ] || [ ! -f "$XAUTHORITY" ]; then
    echo "âŒ X oturumu bulunamadÄ± veya XAUTHORITY dosyasÄ± yok."
    exit 1
fi

echo "ğŸ§© KullanÄ±cÄ±: $USER"
echo "ğŸ“ XAUTHORITY: $XAUTHORITY"
echo "ğŸ”’ Fiziksel klavye ve fare devre dÄ±ÅŸÄ± bÄ±rakÄ±lÄ±yor..."

sudo -u "$USER" DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY bash -c '
for id in $(xinput list |
    grep -E "id=[0-9]+" |
    grep -E "keyboard|pointer" |
    grep -v -E "Virtual|XTEST|integration" |
    sed -E "s/.*id=([0-9]+).*/\1/"); do
    name=$(xinput list --name-only "$id")
    xinput disable "$id" && echo "â›” $name (ID: $id) devre dÄ±ÅŸÄ± bÄ±rakÄ±ldÄ±"
done
'
