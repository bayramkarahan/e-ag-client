#!/bin/bash
# input-on.sh â€” GerÃ§ek klavye ve fareleri yeniden etkinleÅŸtirir (X11 iÃ§in)

USER=$(who | grep "(:0" | awk '{print $1}' | head -n 1)
DISPLAY=":0"
XAUTHORITY="/home/$USER/.Xauthority"

if [ -z "$USER" ] || [ ! -f "$XAUTHORITY" ]; then
    echo "âŒ X oturumu bulunamadÄ± veya XAUTHORITY dosyasÄ± yok."
    exit 1
fi

echo "ğŸ§© KullanÄ±cÄ±: $USER"
echo "ğŸ“ XAUTHORITY: $XAUTHORITY"
echo "ğŸ”“ Fiziksel klavye ve fare yeniden etkinleÅŸtiriliyor..."

sudo -u "$USER" DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY bash -c '
# EtkinleÅŸtirilecek cihaz isimleri
DEVICES=("AT Translated Set 2 keyboard" "ImExPS/2 Generic Explorer Mouse")

for dev in "${DEVICES[@]}"; do
    id=$(xinput list | grep "$dev" | sed -E "s/.*id=([0-9]+).*/\1/")
    if [ -n "$id" ]; then
        xinput enable "$id" && echo "âœ… $dev (ID: $id) etkinleÅŸtirildi"
    else
        echo "âš ï¸ $dev bulunamadÄ± (muhtemelen farklÄ± adla gÃ¶rÃ¼nÃ¼yor)"
    fi
done
'
